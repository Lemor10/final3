<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{% block title %}Admin Panel{% endblock %}</title>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/choices.js/public/assets/styles/choices.min.css"/>

  {% block styles %}{% endblock %}
</head>
<body>

  {% include "navbar_admin.html" %}

  <main class="container mt-4">
    {% block content %}{% endblock %}
  </main>
  <script>
    async function updateNotifDot() {
      const res = await fetch('{{ url_for("notification_count") }}');
      const data = await res.json();
      const dot = document.getElementById('notif-dot');
      if(dot){
        if(data.count > 0){
          dot.classList.remove('d-none');
        } else {
          dot.classList.add('d-none');
        }
      }
    }
    updateNotifDot();
    setInterval(updateNotifDot, 30000);
  </script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/choices.js/public/assets/scripts/choices.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</body>
</html>
